/*! sally 29-05-2014 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.carousel=function(){return this.each(function(){var b=a(this),c=b.width(),d=b.attr("data-set"),e={};d&&(e=a.parseJSON(d));var f="false"==e.auto?!1:!0,g=parseInt(e.outTime)||4e3,h=e.ebox?b.find(e.ebox):b.children().first(),i=e.edot,j=h.children(),k=j.size();if(!(1>=k)){if(i)l=l='<i class="prev" data-dir="-"></i><i class="next" data-dir="+"></i>';else{for(var l='<i class="prev" data-dir="-"></i><i class="next" data-dir="+"></i><span class="dot"><i class="active" data-index="0"></i>',m=1;k>m;m++)l+='<i data-index="'+m+'"></i>';l+="</span>"}b.append(l);var n=b.find(".prev"),o=b.find(".next"),i=b.find(i||".dot").children(),p={index:0,play:function(a,b){var d=this.setIndex(a,b),e=-c*d,f=document.all&&!window.atob;if(f)h.animate({"margin-left":e},350);else{var g="translate("+e+"px,0px)  translateZ(0px)";h.css({transform:g,"-webkit-transform":g,"-moz-transform":g,"-ms-transform":g,"-o-transform":g})}this.setActive(d)},setIndex:function(a,b){var c=this.index;switch(a){case"+":return c==k-1?this.index=0:this.index+=1;case"-":return 0==c?this.index=k-1:this.index-=1;case"click":return this.index=b}},setActive:function(a){i.eq(a).addClass("active").siblings().removeClass("active")},autoPalay:function(){this.loop=setInterval(function(){p.play("+")},g)},stop:function(){clearInterval(p.loop)},init:function(){f&&(this.autoPalay(),b.hover(function(){p.stop()},function(){p.loop=setInterval(function(){p.play("+")},g)})),o.on("click",function(){p.play("+")}),n.on("click",function(){p.play("-")}),i.on("click",function(){var b=(a(this),i.index(this));p.play("click",b)})}};p.init()}})},a('[data-event="carousel"]').carousel()}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.layer=function(b){var c={},b=a.extend(c,b);this.each(function(){var b=a(this),c=a("body"),d=b.attr("data-target"),e=a("#"+d);if(b.outime=null,1!=e.length)return!1;0==a(".m-masklayer").length&&a("body").append('<div class="m-masklayer"></div>');var f=(a(".m-masklayer"),{type:function(c){var d=e.find("iframe");if(1==d.length){if("open"==c){var f=a("#loading");f.addClass("active");var g=b.attr("href");clearTimeout(b.outime),b.outime=setTimeout(function(){d.attr("src",g),d.load(function(){f.removeClass("active")})},360)}"closed"==c&&d.attr("src","")}},open:function(){this.type("open"),c.on("keyup",this.onDocumentKeyup).on("click",this.onDocumentClick).addClass("f-layer-show")},closed:function(){this.type("closed"),c.off("keyup",this.onDocumentKeyup).off("click",this.onDocumentClick).removeClass("f-layer-show")},onDocumentKeyup:function(a){27===a.keyCode&&f.closed()},onDocumentClick:function(b){a(b.target).is('[data-event="close"],.m-masklayer')&&(b.preventDefault(),f.closed())},setoff:function(b){var c=b.offset(),d=a(window).scrollTop(),f=c.top-d;e.css({left:c.left,top:f})}});a(document).on("click",'[data-event="layer"]',function(b){f.setoff(a(this)),f.open(),b.preventDefault()}).on("mouseover",'[data-event="layer"]',function(){f.setoff(a(this))})})},a('[data-event="layer"]').layer()}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.roll=function(b){var c={},b=a.extend(c,b);this.each(function(){var c=a(this),d=c.attr("data-target")||"active",e=b.event||c.attr("data-roll"),f={fixed:function(){var a=c.height(),b=c.width(),d=37;this.top=c.offset().top,c.wrap('<div style="width:'+b+"px; height:"+a+'px;position:relative"></div>'),this.start(d,this.setFiexd)},follow:function(){function b(a){e.removeClass("active"),e.eq(a).addClass("active")}function d(){var d=c.data("index"),e=d+1>f.length?f.length:d+1,g=0>d-1?0:d-1,h=f[e],i=f[g],j=f[d].top,k=a(window).scrollTop();k>j&&k<h.top?b(d):j>k&&k>i.top?(c.data("index",i.index),b(i.index)):k>h.top&&(c.data("index",h.index),b(h.index))}var e=a("a",c),f={};c.data("index",0),f.length=e.length-1,e.each(function(b){var c=a(this).attr("href"),d=parseInt(a(c).offset().top)-90;f[b]={index:b,id:c,top:d}});var g=37;this.start(g,d)},gotop:function(){this.top=a(window).height(),c.on("click",function(a){f.setTop(),a.preventDefault()}),this.top=500;var b=37;this.start(b,this.setFiexd)},setTop:function(){a("html, body").animate({scrollTop:0},120)},setFiexd:function(){var b=a(window).scrollTop();b>f.top?c.addClass(d):c.removeClass(d)},start:function(b,c){c(),a(window).on("scroll",a.throttle(b,c))}};f[e]&&f[e]()})},a("[data-roll]").roll()}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.star=function(b){var c={},b=a.extend(c,b);this.each(function(){var b=a(this),c=b.children(),d=b.find("input");b.on({"mouseover.star":function(){var a=c.filter(".active"),d=c.index(a);b.data("index",d),a.removeClass("active")},"mouseout.star":function(){var a=b.data("index"),e=c.eq(a),f=e.attr("data-value");d.val(f),e.addClass("active")},"click.star":function(a){var d=a.target,e=c.index(d);b.data("index",e)}})})},a("[data-event='star']").star()}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.tab=function(){this.each(function(){function b(){var b=d.index(this);a(this).addClass("active").siblings().removeClass("active"),e.eq(b).addClass("active").siblings().removeClass("active")}var c=a(this),d=a(".tab-hd",c).children(),e=a(".tab-bd",c).children(),f=c.attr("data-type")||"mouseover";d.on(f,b)})},a('[data-event="tab"]').tab()}),function(a){a.fn.sallytoggle=function(b){var c={},b=a.extend(c,b);this.each(function(){var b=a(this),c=b.attr("data-target"),d=(b.attr("data-toggle"),{close:function(){b.on("click",function(b){a(this).parents("."+c).fadeOut(),b.preventDefault(),b.stopPropagation()})},hover:function(){b.on("mouseenter",function(){clearTimeout(b.ctimes),b.addClass(c)}).on("mouseleave",function(){clearTimeout(b.ctimes),b.ctimes=setTimeout(function(){b.removeClass(c)},0)})},dropdown:function(){var d=b.children("."+c);b.on("click.dropdown",function(a){d.toggle(),a.preventDefault(),a.stopPropagation()}),a(document).on("click.dropdown",function(){!d.is(":hidden")&&d.hide()})}});!!d[eventname]&&d[eventname]()})}}(jQuery),jQuery(function(a){a("[data-toggle]").sallytoggle()}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.sValidate=function(b){var c={},b=a.extend(c,b);this.each(function(){var b=a(this),c=(a("input,textarea",b),a("input[required],textarea[required],[data-type='required']",b)),d=a("input[type=radio],input[type=checkbox]",b),e=b.find(":submit"),f=c.length;b.timeout=null;var g={validation:function(a,b){var c=a.sparent||a.parent(),d=a.boole,b=c.hasClass("focus");d?(a.attr("data-validation",1),b&&(c.removeClass("error"),c.addClass("completed"))):(a.attr("data-validation",0),b&&(c.addClass("error"),c.removeClass("completed")))},addMod:function(){var b=function(a){var b=a.find(":checked");a.boole=b.length,a.sparent=a,g.validation(a)},c=function(b){b.pattern=b.attr("pattern"),b.confirmation=b.attr("data-confirmation"),b.value=a.trim(b.val()),b.boole=a.trim(b.val()),g.validation(b),b.boole&&b.pattern&&g.pattern(b),b.boole&&b.confirmation&&(console.log(b),g.confirmation(b))};return{select:b,input:c}},required:function(b){var b=b||c;b.each(function(){var b=a(this),c=b.children().length;0==c?g.addMod().input(b):g.addMod().select(b)})},pattern:function(a){var b=new RegExp(a.pattern),c=a.value;a.boole=b.test(c),this.validation(a)},confirmation:function(b){var c=a("#"+b.confirmation),d=a.trim(c.val());b.boole=d==b.value?!0:!1,this.validation(b)},tips:function(){var c="",d=a("[data-validation=0]",b);return d.each(function(){var b=a(this),d=b.next(".tips").text()||b.attr("data-tips")||"";c+=d}),c},setState:function(){this.required();var c=a("[data-validation=1]",b).length;c==f?(b.attr("data-state",1),e.removeAttr("disabled")):(b.attr("data-state",0),e.attr("disabled","disabled"))},init:function(){c.not("[data-type='required']").on({"keyup.sValidate":function(){var c=a(this);clearTimeout(b.timeout),b.timeout=setTimeout(function(){g.required(c),g.setState()},150)},"focus.sValidate":function(){var b=a(this),c=b.parent();c.addClass("focus")},"blur.sValidate":function(){var b=a(this);parent=b.parent(),parent.removeClass("focus")}}),d.on("change.sValidate",function(){var b=a(this),c=b.closest("[data-validation]");g.required(c),g.setState()}),e.on("click.sValidate",function(){var b=a(this);return b.hasClass("disabled")?!1:void 0}),g.setState()}};g.init()})},a("[data-event='validate']").sValidate()});